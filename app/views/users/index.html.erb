<% content_for :title, "Users" %>

<div class="row text-center">
  <div class="small-12 columns">

    <h1>All Users</h1>
    <hr />
    <div class="panel">

      <table id="users-table">
        <thead>
          <tr>
            <th>Email</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th width="100">Clients</th>
            <th width="150">Administrator?</th>
          </tr>
        </thead>
        <tbody>
        <% @users.each do | user | %>
          <tr>
            <td>
              <%= link_to user do %>
                <%= user.email %>
              <% end %>
            </td>
            <td><%= user.first_name %></td>
            <td><%= user.last_name %></td>
            <td><%= user.clients.size %></td>
            <td>
              <% if user == current_user %>
                <em>Yes</em>
              <% else %>
                <% if user.is_admin %>
                  <strong>Yes</strong>&emsp;
                  <%= link_to controller: "users", :action => "toggle_admin", :id => user do %>
                    [<i class="fa fa-minus-square"></i> Revoke]
                  <% end %>
                <% else %>
                  <strong>No</strong>&emsp;
                  <%= link_to controller: "users", :action => "toggle_admin", :id => user do %>
                    [<i class="fa fa-plus-square"></i> Grant]
                  <% end %>
                <% end %>
              <% end %>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>

      <%= link_to new_user_path, class: "button" do %>
        <i class="fa fa-plus"></i>&emsp;New User
      <% end %>

    </div>
  </div>
</div>